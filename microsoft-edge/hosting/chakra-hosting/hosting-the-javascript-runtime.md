---
description: Verwenden Sie die standardbasierte Chakra JavaScript-Engine, um Ihrer Windows-Anwendung Skriptfunktionen hinzuzufügen.
title: Hosten der JavaScript-Laufzeit
ms.date: 06/18/2020
ms.prod: microsoft-edge
ms.topic: article
ms.assetid: 30ec744e-57cc-4ef5-8fe1-d2c27b946548
caps.latest.revision: 14
author: MSEdgeTeam
ms.author: msedgedevrel
ms.openlocfilehash: 043f7ecd174515ce407d2fc0c2bbe796fa2750a5
ms.sourcegitcommit: 037a2d62333691104c9accb4862968f80a3465a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/18/2020
ms.locfileid: "10752248"
---
# <span data-ttu-id="7c435-103">Hosten der JavaScript-Laufzeit</span><span class="sxs-lookup"><span data-stu-id="7c435-103">Hosting the JavaScript runtime</span></span>  

[!INCLUDE [deprecation-note](../includes/deprecation-note.md)]  

<span data-ttu-id="7c435-104">Die APIs für JavaScript-Runtime (JsRT) bieten eine Möglichkeit für Desktop-, Windows Store-und serverseitige Anwendungen, die unter dem Windows-Betriebssystem ausgeführt werden, um der Anwendung mithilfe des standardbasierten Chakra JavaScript-Moduls, das auch von Microsoft Edge und Internet Explorer verwendet wird, Skriptfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="7c435-104">The JavaScript Runtime (JsRT) APIs provide a way for desktop, Windows Store, and server-side applications running on the Windows operating system to add scripting capabilities to the application by using the standards-based Chakra JavaScript engine that is also utilized by Microsoft Edge and Internet Explorer.</span></span> <span data-ttu-id="7c435-105">Diese APIs sind unter Windows 10 und einer beliebigen Version des Windows-Betriebssystems verfügbar, auf dem Internet Explorer, Version 11,0, auf dem Computer installiert ist.</span><span class="sxs-lookup"><span data-stu-id="7c435-105">These APIs are available on Windows 10 and any version of the Windows operating system that has Internet Explorer version 11.0 installed on the machine.</span></span> <span data-ttu-id="7c435-106">Weitere Informationen finden Sie unter [Referenz (JavaScript-Laufzeit)](../chakra-hosting/reference-javascript-runtime.md).</span><span class="sxs-lookup"><span data-stu-id="7c435-106">For more info, see [Reference (JavaScript Runtime)](../chakra-hosting/reference-javascript-runtime.md).</span></span> <span data-ttu-id="7c435-107">Informationen zur Verwendung von JsRT in Windows Store-Apps finden Sie unter [JsRT und die universelle Windows-Plattform](#Windows).</span><span class="sxs-lookup"><span data-stu-id="7c435-107">For info on using the JsRT in Windows Store apps, see [JsRT and the Universal Windows Platform](#Windows).</span></span>  

> [!NOTE]
> <span data-ttu-id="7c435-108">Diese Dokumentation setzt eine allgemeine Vertrautheit mit der JavaScript-Sprache voraus.</span><span class="sxs-lookup"><span data-stu-id="7c435-108">This documentation assumes a general working familiarity with the JavaScript language.</span></span>  

## <span data-ttu-id="7c435-109">Konzepte</span><span class="sxs-lookup"><span data-stu-id="7c435-109">Concepts</span></span>  

<span data-ttu-id="7c435-110">Wie Sie das JavaScript-Modul mithilfe der JsRT-APIs hosten, hängt von zwei Schlüsselkonzepten ab: Laufzeiten und Ausführungs Kontexten.</span><span class="sxs-lookup"><span data-stu-id="7c435-110">Understanding how to host the JavaScript engine using the JsRT APIs depends on two key concepts: runtimes and execution contexts.</span></span>  

<span data-ttu-id="7c435-111">Eine *Common Language Runtime* stellt eine vollständige JavaScript-Ausführungsumgebung dar.</span><span class="sxs-lookup"><span data-stu-id="7c435-111">A *runtime* represents a complete JavaScript execution environment.</span></span> <span data-ttu-id="7c435-112">Jede erstellte Laufzeit verfügt über einen eigenen isolierten Garbage Collection-Heap und standardmäßig über einen eigenen Just-in-time (JIT)-Compiler-Thread und einen Garbage Collector-Thread (GC).</span><span class="sxs-lookup"><span data-stu-id="7c435-112">Each runtime that is created has its own isolated garbage collected heap and, by default, its own just-in-time (JIT) compiler thread and garbage collector (GC) thread.</span></span> <span data-ttu-id="7c435-113">Ein *Ausführungskontext* stellt eine JavaScript-Umgebung dar, die ein eigenes JavaScript-globales Objekt hat, das sich von allen anderen Ausführungs Kontexten unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="7c435-113">An *execution context* represents a JavaScript environment that has its own JavaScript global object distinct from all other execution contexts.</span></span> <span data-ttu-id="7c435-114">Eine Laufzeit kann mehrere Ausführungskontexte enthalten, und in solchen Fällen teilen alle Ausführungskontexte den JIT-Compiler und den GC-Thread, der der Laufzeit zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="7c435-114">One runtime may contain multiple execution contexts, and in such cases, all the execution contexts share the JIT compiler and GC thread associated with the runtime.</span></span>  

<span data-ttu-id="7c435-115">Runtimes stellen einen einzelnen Ausführungsthread dar.</span><span class="sxs-lookup"><span data-stu-id="7c435-115">Runtimes represent a single thread of execution.</span></span> <span data-ttu-id="7c435-116">In einem bestimmten Thread kann jeweils nur eine Laufzeit aktiv sein, und eine Laufzeit kann nur jeweils für einen Thread aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="7c435-116">Only one runtime can be active on a particular thread at a time, and a runtime can only be active on one thread at a time.</span></span> <span data-ttu-id="7c435-117">Runtimes sind "Rental-threaded", sodass eine Runtime, die derzeit nicht in einem Thread aktiv ist (also keine JavaScript-Codes ausführt oder auf Anrufe vom Host reagiert), für alle Threads verwendet werden kann, auf denen noch keine aktive Laufzeit vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="7c435-117">Runtimes are rental threaded, so a runtime that is not currently active on a thread (i.e. isn't running any JavaScript code or responding to any calls from the host) can be used on any thread that doesn't already have an active runtime on it.</span></span>  

<span data-ttu-id="7c435-118">Ausführungskontexte sind an eine bestimmte Laufzeit gebunden und führen Code innerhalb dieser Runtime aus.</span><span class="sxs-lookup"><span data-stu-id="7c435-118">Execution contexts are tied to a particular runtime and execute code within that runtime.</span></span> <span data-ttu-id="7c435-119">Im Gegensatz zu Laufzeiten können mehrere Ausführungskontexte gleichzeitig in einem Thread aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="7c435-119">Unlike runtimes, multiple execution contexts can be active on a thread at the same time.</span></span> <span data-ttu-id="7c435-120">Damit ein Host einen Aufruf in einem Ausführungskontext durchführen kann, kann dieser Ausführungskontext wieder an den Host zurückrufen, und der Host kann einen Aufruf in einen anderen Ausführungskontext führen.</span><span class="sxs-lookup"><span data-stu-id="7c435-120">So a host can make a call into an execution context, that execution context can call back to the host, and the host can make a call into a different execution context.</span></span>  

![Mehrere Ausführungskontexte](../chakra-hosting/media/js-chakra-hosting.png "JS_Chakra_Hosting")  

<span data-ttu-id="7c435-122">In der Praxis kann ein einzelner Ausführungskontext verwendet werden, es sei denn, ein Host muss Code in getrennten Umgebungen ausführen.</span><span class="sxs-lookup"><span data-stu-id="7c435-122">In practice, unless a host needs to run code in separated environments, a single execution context can be used.</span></span> <span data-ttu-id="7c435-123">Auch wenn ein Host mehrere Codeabschnitte gleichzeitig ausführen muss, genügt eine einzige Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="7c435-123">Similarly, unless a host needs to run multiple pieces of code concurrently, a single runtime is sufficient.</span></span>  

## <span data-ttu-id="7c435-124">Speicherverwaltung</span><span class="sxs-lookup"><span data-stu-id="7c435-124">Memory management</span></span>  

<span data-ttu-id="7c435-125">Bei JavaScript handelt es sich um eine Garbage Collection-Sprache, und es gibt daher verschiedene Aspekte, die beim Arbeiten mit den JsRT-APIs aus einer anderen Sprache berücksichtigt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="7c435-125">JavaScript is a garbage collected language, and thus there are several considerations that must be kept in mind when working with the JsRT APIs from another language.</span></span>  

<span data-ttu-id="7c435-126">Die wichtigste Überlegung ist, dass der JavaScript-Garbage Collector nur Verweise auf Werte an zwei Stellenanzeigen kann: den Heap der Laufzeit und den Stapel.</span><span class="sxs-lookup"><span data-stu-id="7c435-126">The main consideration is that the JavaScript garbage collector can only see references to values in two places: its runtime's heap, and the stack.</span></span> <span data-ttu-id="7c435-127">Daher wird ein Verweis auf einen JavaScript-Wert, der in einem anderen JavaScript-Wert oder in einer lokalen Variablen auf dem Stapel gespeichert ist, immer vom Garbage Collector angezeigt.</span><span class="sxs-lookup"><span data-stu-id="7c435-127">Thus, a reference to a JavaScript value that is stored inside of another JavaScript value or in a local variable on the stack will always be seen by the garbage collector.</span></span> <span data-ttu-id="7c435-128">Verweise, die an anderen Speicherorten gespeichert sind, wie Heaps, die vom Host oder System verwaltet werden, werden vom Garbage Collector jedoch nicht angezeigt und können zu einer vorzeitigen Sammlung von Werten führen, die vom Host weiterhin verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="7c435-128">But references stored in other locations, such as heaps managed by the host or the system, will not be seen by the garbage collector and may result in premature collection of values that are still in use by the host.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="7c435-129">Bei einigen Sprachcompilern (wie dem Visual Studio C++-Compiler) werden lokale Variablen nach Möglichkeit optimiert.</span><span class="sxs-lookup"><span data-stu-id="7c435-129">Some language compilers (such as the Visual Studio C++ compiler) will optimize away local variables where possible.</span></span> <span data-ttu-id="7c435-130">Es muss darauf geachtet werden, dass lokale Variablen, die auf JavaScript-Werte verweisen, auf dem Stapel liegen, wenn Sie davon ausgehen, dass diese Werte weiterhin aktiv sind.</span><span class="sxs-lookup"><span data-stu-id="7c435-130">Care must be taken to ensure that local variables that reference JavaScript values are on the stack if they are expected to keep those values alive.</span></span>  

<span data-ttu-id="7c435-131">Wenn ein Verweis auf einen JavaScript-Wert an einem Speicherort gespeichert wird, der für den Garbage Collector nicht sichtbar ist, muss der Host Verweise manuell mithilfe der JsRT-APIs hinzufügen und entfernen.</span><span class="sxs-lookup"><span data-stu-id="7c435-131">If a reference to a JavaScript value will be stored in a location not visible to the garbage collector, the host must manually add and remove references using the JsRT APIs.</span></span>  

## <span data-ttu-id="7c435-132">Ausnahmebehandlung</span><span class="sxs-lookup"><span data-stu-id="7c435-132">Exception handling</span></span>  

<span data-ttu-id="7c435-133">Wenn während der Skriptausführung eine JavaScript-Ausnahme auftritt, wird die enthaltende Laufzeit in einen Ausnahmezustand versetzt.</span><span class="sxs-lookup"><span data-stu-id="7c435-133">When a JavaScript exception occurs during script execution, the containing runtime is put into an exception state.</span></span> <span data-ttu-id="7c435-134">In einem Ausnahmezustand kann kein Code ausgeführt werden, und alle API-Aufrufe schlagen mit dem Fehlercode fehl, `JsErrorInExceptionState` bis der Host die Ausnahme mithilfe der API abruft und löscht `JsGetAndClearException` .</span><span class="sxs-lookup"><span data-stu-id="7c435-134">While in an exception state, no code can run and all API calls will fail with the error code `JsErrorInExceptionState` until the host retrieves and clears the exception using the `JsGetAndClearException` API.</span></span> <span data-ttu-id="7c435-135">Wenn der Host von einem JavaScript-Rückruf zurückkehrt, ohne die Laufzeit aus einem Ausnahmezustand zu löschen, wird die JavaScript-Ausnahme erneut ausgelöst, sobald die Steuerung wieder an das JavaScript-Modul übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="7c435-135">If the host returns from a JavaScript callback without clearing the runtime from an exception state, then the JavaScript exception will be re-thrown as soon as control passes back to the JavaScript engine.</span></span> <span data-ttu-id="7c435-136">Dadurch können Host Rückrufe auch eine JavaScript-Ausnahme auslösen, indem Sie die Laufzeit in einen Ausnahmezustand setzen und dann von einem Host Rückruf zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="7c435-136">This also enables host callbacks to "throw" a JavaScript exception by setting the runtime into an exception state and then returning from a host callback.</span></span>  

<span data-ttu-id="7c435-137">Einem Host ist es nicht gestattet, seine eigenen internen Ausnahmen über einen Host Rückruf zu übertragen – alle Rückrufmethoden müssen alle Host Ausnahmen abfangen, bevor Sie die Steuerung an die Laufzeit zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="7c435-137">A host is not allowed to let its own internal exceptions to propagate across a host callback—any callback methods must catch all host exceptions before returning control to the runtime.</span></span>  

## <span data-ttu-id="7c435-138">Laufzeit-Ressourcennutzung</span><span class="sxs-lookup"><span data-stu-id="7c435-138">Runtime resource usage</span></span>  

<span data-ttu-id="7c435-139">Mit den JsRT-APIs wird eine Reihe von Möglichkeiten zum Überwachen und Ändern der Art und Weise der Verwendung von Ressourcen durch Runtimes verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="7c435-139">The JsRT APIs expose a number of way to monitor and modify the way runtimes use resources.</span></span> <span data-ttu-id="7c435-140">Sie gliedern sich im Allgemeinen in die folgenden Kategorien:</span><span class="sxs-lookup"><span data-stu-id="7c435-140">They generally break down into the following categories:</span></span>  

*   <span data-ttu-id="7c435-141">**Thread Verwendung**.</span><span class="sxs-lookup"><span data-stu-id="7c435-141">**Thread Usage**.</span></span> <span data-ttu-id="7c435-142">Standardmäßig erstellt jede Laufzeit einen dedizierten JIT-Compiler-Thread und einen dedizierten GC-Thread, der diese Runtime bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="7c435-142">By default, each runtime will create a dedicated JIT compiler thread and a dedicated GC thread that service that runtime.</span></span> <span data-ttu-id="7c435-143">Wenn eine Common Language Runtime mit dem `JsRuntimeAttributeDisableBackgroundWork` Flag erstellt wird, werden die JIT-und die GC-Arbeit für den Laufzeitthread selbst und nicht für jedes einzelne Hintergrund-Threads ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7c435-143">If a runtime is created with the `JsRuntimeAttributeDisableBackgroundWork` flag, then the JIT and GC work will be performed on the runtime thread itself instead of separate background threads for each one of them.</span></span> <span data-ttu-id="7c435-144">Ein Host kann auch einen Thread Dienst Rückruf für den Aufruf bereitstellen `JsCreateRuntime` , der es dem Host ermöglicht, JIT-und GC-Arbeit in einer Weise zu planen, in der es für Sie geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="7c435-144">A host can also supply a thread service callback to the `JsCreateRuntime` call, which will allow the host to schedule JIT and GC work in any way it sees fit.</span></span>
*   <span data-ttu-id="7c435-145">**Speichernutzung**.</span><span class="sxs-lookup"><span data-stu-id="7c435-145">**Memory Usage**.</span></span> <span data-ttu-id="7c435-146">Es gibt mehrere Möglichkeiten, die Speicherauslastung einer Laufzeit zu überwachen und zu ändern.</span><span class="sxs-lookup"><span data-stu-id="7c435-146">There are several ways to monitor and modify the memory usage of a runtime.</span></span> <span data-ttu-id="7c435-147">Wenn die Laufzeit für längere Zeit ausgeführt wird, kann der Host das Flag angeben, `JsRuntimeAttributeEnableIdleProcessing` Wenn die Laufzeit erstellt und dann aufgerufen `JsIdle` wird, wenn sich der Host im Ruhezustand befindet.</span><span class="sxs-lookup"><span data-stu-id="7c435-147">If the runtime will be running for a long time, the host can specify the `JsRuntimeAttributeEnableIdleProcessing` flag when creating the runtime and then call `JsIdle` when the host is in an idle state.</span></span> <span data-ttu-id="7c435-148">Dadurch kann das Modul einige Arbeitsspeicher Bereinigung und-Buchhaltung bis zur Leerlaufzeit aufschieben.</span><span class="sxs-lookup"><span data-stu-id="7c435-148">This allows the engine to defer some memory cleanup and bookkeeping work until idle time.</span></span>  
    
    <span data-ttu-id="7c435-149">Der Host kann Garbage Collections durch Aufrufen überwachen `JsSetRuntimeBeforeCollectCallback` .</span><span class="sxs-lookup"><span data-stu-id="7c435-149">The host can monitor garbage collections by calling `JsSetRuntimeBeforeCollectCallback`.</span></span> <span data-ttu-id="7c435-150">Sie kann auch Zuordnungen überwachen, die vom Heap durch einen Aufruf durchgeführt werden `JsSetRuntimeMemoryAllocationCallback` .</span><span class="sxs-lookup"><span data-stu-id="7c435-150">It can also monitor allocations made by the heap by calling `JsSetRuntimeMemoryAllocationCallback`.</span></span> <span data-ttu-id="7c435-151">Beachten Sie, dass diese API nicht bei jeder JavaScript-Zuweisung zurückruft, nur wenn der Heap der Laufzeit mehr Speicherplatz benötigt.</span><span class="sxs-lookup"><span data-stu-id="7c435-151">Note that this API does not call back on every JavaScript allocation, just when the runtime's heap needs more space from which to allocate.</span></span> <span data-ttu-id="7c435-152">Der Speicher Zuweisungs Rückruf ist berechtigt, die Anforderung zu verweigern, wodurch eine Garbage Collection ausgelöst wird und, wenn kein Arbeitsspeicher verfügbar ist, ein Arbeitsspeicherfehler in der Laufzeit auftritt.</span><span class="sxs-lookup"><span data-stu-id="7c435-152">The memory allocation callback is allowed to deny the request, which will trigger a garbage collection and, if no memory is available, an out of memory error in the runtime.</span></span>  
    
    <span data-ttu-id="7c435-153">Der Host kann auch aufrufen `JsSetRuntimeMemoryLimit` , um einen Grenzwert für den Arbeitsspeicher festzulegen, den eine Laufzeit verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="7c435-153">The host can also call `JsSetRuntimeMemoryLimit` to set a limit for how much memory a runtime can use.</span></span> <span data-ttu-id="7c435-154">Wenn eine Common Language Runtime auf eine Grenze trifft, wird eine Garbage Collection ausgelöst, und wenn kein Arbeitsspeicher verfügbar ist, wird ein Fehler aufgrund eines Arbeitsspeichers von der Laufzeit ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="7c435-154">When a runtime hits a limit, it will trigger a garbage collection and, if no memory is available, an out of memory error will be thrown by the runtime.</span></span>  
    
*   <span data-ttu-id="7c435-155">**Skript Unterbrechung und-Auswertung**</span><span class="sxs-lookup"><span data-stu-id="7c435-155">**Script Interruption and Evaluation**.</span></span> <span data-ttu-id="7c435-156">Der Host kann aufrufen `JsDisableRuntimeExecution` , um die Ausführung innerhalb einer Laufzeit zu terminieren.</span><span class="sxs-lookup"><span data-stu-id="7c435-156">The host can call `JsDisableRuntimeExecution` to terminate execution within a runtime.</span></span> <span data-ttu-id="7c435-157">Dieser Anruf kann jederzeit und von jedem beliebigen Thread aus erfolgen.</span><span class="sxs-lookup"><span data-stu-id="7c435-157">This call can be made at any time and from any thread.</span></span> <span data-ttu-id="7c435-158">Da die Skript Beendigung davon abhängt, in den Code eingefügte Guard Points zu erreichen, wird ein Skript möglicherweise nicht zum exakten Zeitpunkt beendet, aber dies wird sehr kurz danach sein.</span><span class="sxs-lookup"><span data-stu-id="7c435-158">Because script termination depends on reaching guard points inserted into the code, a script may not terminate at the exact moment, but will do so very shortly afterwards.</span></span> <span data-ttu-id="7c435-159">Standardmäßig werden Termination Guard-Punkte in dem generierten Code konservativ plaziert und decken möglicherweise nicht alle Situationen ab, wie etwa eine Endlosschleife.</span><span class="sxs-lookup"><span data-stu-id="7c435-159">By default, termination guard points are placed in the generated code conservatively and may not cover every situation, such as an infinite loop.</span></span> <span data-ttu-id="7c435-160">Das Erstellen der Common Language Runtime mit dem `JsRuntimeAttributeAllowScriptInterrupt` Flag führt dazu, dass die Common Language Runtime zusätzliche Überprüfungen für Endlosschleifen einfügt, oft zu Lasten eines geringen Leistungsaufwands.</span><span class="sxs-lookup"><span data-stu-id="7c435-160">Creating the runtime with the `JsRuntimeAttributeAllowScriptInterrupt` flag causes the runtime to insert additional checks for infinite loops, often at the cost of a small performance overhead.</span></span>  
    
    <span data-ttu-id="7c435-161">Wenn ein Host die Generierung von systemeigenem Code durch den JIT-Compiler nicht zulassen möchte, kann er das `JsRuntimeAttributeDisableNativeCodeGeneration` Flag angeben.</span><span class="sxs-lookup"><span data-stu-id="7c435-161">If a host wishes to disallow generation of native code by the JIT compiler, it can specify the `JsRuntimeAttributeDisableNativeCodeGeneration` flag.</span></span> <span data-ttu-id="7c435-162">Ein Host kann auch verhindern, dass Skripts dynamisch Skripts selbst ausführen, indem Sie das `JsRuntimeAttributeDisableEval` Flag angeben.</span><span class="sxs-lookup"><span data-stu-id="7c435-162">A host can also disallow scripts from dynamically running scripts itself by specifying the `JsRuntimeAttributeDisableEval` flag.</span></span>  
    
## <span data-ttu-id="7c435-163">Debuggen und Profilerstellung</span><span class="sxs-lookup"><span data-stu-id="7c435-163">Debugging and profiling</span></span>  

<span data-ttu-id="7c435-164">JsRT-APIs unterstützen das Debuggen und die Profilerstellung über die Active Scripting-Technologie.</span><span class="sxs-lookup"><span data-stu-id="7c435-164">JsRT APIs supports debugging and profiling via the Active Scripting technology.</span></span>  

<span data-ttu-id="7c435-165">Ab Windows 10 unterstützt das Chakra JavaScript-Modul das Legacy-Modul "Internet Explorer (MSHTML)" und "New Microsoft Edge (EdgeHTML)", und Sie können entweder in JsRT (siehe [Targeting Microsoft Edge vs. Legacy Engines](../chakra-hosting/targeting-edge-vs-legacy-engines-in-jsrt-apis.md) für Details).</span><span class="sxs-lookup"><span data-stu-id="7c435-165">Starting in Windows 10, the Chakra JavaScript Engine supports the legacy Internet Explorer (MSHTML) engine and new Microsoft Edge (EdgeHTML) engine, and you can target either in JsRT (see [Targeting Microsoft Edge vs. Legacy Engines](../chakra-hosting/targeting-edge-vs-legacy-engines-in-jsrt-apis.md) for details).</span></span> <span data-ttu-id="7c435-166">Das Debuggen eines Skripts in Visual Studio funktioniert unterschiedlich zwischen dem Legacy Modul und dem Microsoft Edge-Modul.</span><span class="sxs-lookup"><span data-stu-id="7c435-166">Debugging a script in Visual Studio works differently between the legacy engine and Microsoft Edge engine.</span></span> <span data-ttu-id="7c435-167">Beim Legacy Modul muss der Host einen [IDebugApplication-Schnittstellen](/scripting/winscript/reference/idebugapplication-interface) Zeiger bereitstellen, der von einer [IProcessDebugManager-Schnittstellen](/scripting/winscript/reference/iprocessdebugmanager-interface) Instanz abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="7c435-167">With the legacy engine, the host needs to provide an [IDebugApplication Interface](/scripting/winscript/reference/idebugapplication-interface) pointer, which can be obtained from an [IProcessDebugManager Interface](/scripting/winscript/reference/iprocessdebugmanager-interface) instance.</span></span> <span data-ttu-id="7c435-168">Mit dem Microsoft-Edge-Modul `IDebugApplication` ist veraltet, und das Chakra-Modul ermöglicht das systemeigene und Skriptdebugging über den Visual Studio-Debugger, ohne dass eine Implementierung des Benutzers erforderlich ist `IDebugApplication` .</span><span class="sxs-lookup"><span data-stu-id="7c435-168">With the Microsoft Edge engine, `IDebugApplication` is deprecated, and the Chakra engine enables native and script debugging capabilities through the Visual Studio debugger without requiring an implementation of `IDebugApplication` from the user.</span></span>  

<span data-ttu-id="7c435-169">Damit Skripts in einem Ausführungskontext debugfähigen werden, muss das Chakra-Modul auf die Verwendung von niedrigeren effizienten Code Ausführungsmethoden umschalten.</span><span class="sxs-lookup"><span data-stu-id="7c435-169">To make scripts in an execution context debuggable, the Chakra engine has to switch to using less efficient code execution methods.</span></span> <span data-ttu-id="7c435-170">Daher wird debugfähigen-Code in der Regel langsamer ausgeführt als nicht-debugfähigen-Code.</span><span class="sxs-lookup"><span data-stu-id="7c435-170">As such, debuggable code typically runs slower than non-debuggable code.</span></span> <span data-ttu-id="7c435-171">Aus diesem Grund kann ein Host mit dem Legacy Modul entweder von Anfang an das Debuggen in einem Ausführungskontext starten, indem er den Zeiger im `IDebugApplication` Vordergrund bereitstellt `JsCreateContext` , oder es kann warten, bis das Debuggen erforderlich ist, und dann aufrufen `JsStartDebugging` .</span><span class="sxs-lookup"><span data-stu-id="7c435-171">As a result, with the legacy engine, a host can choose to either start debugging in an execution context from the beginning by providing the `IDebugApplication` pointer up front through `JsCreateContext`, or it can wait until debugging is needed and then call `JsStartDebugging`.</span></span> <span data-ttu-id="7c435-172">Mit dem Microsoft-Edge-Modul wird `JsCreateContext` kein Parameter mehr benötigt `IDebugApplication` , und infolgedessen wird das Skript nur debugfähigen, nachdem `JsStartDebugging` es aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="7c435-172">With the Microsoft Edge engine, `JsCreateContext` no longer takes an `IDebugApplication` parameter, and as a result the script is debuggable only after `JsStartDebugging` is called.</span></span> <span data-ttu-id="7c435-173">Beim Debuggen mit Visual Studio muss die Debugger-Option "Skript" aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="7c435-173">When debugging using Visual Studio, the "Script" debugger option must be enabled.</span></span>  

<span data-ttu-id="7c435-174">Der JavaScript-Code in einem Ausführungskontext kann auf eine von zwei Arten profiliert werden.</span><span class="sxs-lookup"><span data-stu-id="7c435-174">The JavaScript code in an execution context can be profiled in one of two ways.</span></span> <span data-ttu-id="7c435-175">Die Befehlszeile Visual Studio Profiler (vsperf.exe) kann in Windows 8,1 und höheren Versionen mit dem/js-Schalter verwendet werden, um einen Bericht zu erstellen, der auf den in der Anwendung ausgeführten JavaScript-Code ausgerichtet ist.</span><span class="sxs-lookup"><span data-stu-id="7c435-175">The command line Visual Studio Profiler (vsperf.exe) can be used in Windows 8.1 and later versions with the /js switch to produce a report that targets the JavaScript code run in the application.</span></span> <span data-ttu-id="7c435-176">Oder der Host kann direkt anrufen `JsStartProfiling` und `JsStopProfiling` einen Rückruf für die Profilerstellung selbst bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="7c435-176">Or the host can directly call `JsStartProfiling` and `JsStopProfiling` and provide a callback to do profiling itself.</span></span> <span data-ttu-id="7c435-177">Der Host kann den Zustand des Garbage Collection-Heaps auch durch Aufrufen untersuchen `JsEnumerateHeap` .</span><span class="sxs-lookup"><span data-stu-id="7c435-177">The host can also examine the state of the garbage collected heap by calling `JsEnumerateHeap`.</span></span> <span data-ttu-id="7c435-178">Die Profilerstellung in JsRT funktioniert auf die gleiche Weise zwischen dem Legacy-und dem Microsoft Edge-Modul.</span><span class="sxs-lookup"><span data-stu-id="7c435-178">Profiling in JsRT works in the same manner between the legacy and the Microsoft Edge engine.</span></span> <span data-ttu-id="7c435-179">JsRT-Profilerstellungs-APIs ( `JsStartProfiling` ,, `JsStopProfiling` `JsEnumerateHeap` , und `JsIsEnumeratingHeap` ) sind jedoch für universelle Windows-apps nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="7c435-179">However, JsRT profiling APIs (`JsStartProfiling`, `JsStopProfiling`, `JsEnumerateHeap`, and `JsIsEnumeratingHeap`) are not available for Universal Windows Apps.</span></span>  

<a name="Windows"></a>   

## <span data-ttu-id="7c435-180">JsRT und die universelle Windows-Plattform</span><span class="sxs-lookup"><span data-stu-id="7c435-180">JsRT and the Universal Windows Platform</span></span>  

<span data-ttu-id="7c435-181">Sie können JsRT-APIs verwenden, um einer universellen Windows-App Skriptfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="7c435-181">You can use JsRT APIs to add scripting capabilities to a Universal Windows app.</span></span> <span data-ttu-id="7c435-182">Eine universelle Windows-APP, die die JsRT-APIs verwendet, muss auf die Microsoft Edge JsRT-APIs ausgerichtet sein, die wiederum auf das Edge-Chakra-Modul ausgerichtet sind.</span><span class="sxs-lookup"><span data-stu-id="7c435-182">A Universal Windows app that uses the JsRT APIs will need to target the Microsoft Edge JSRT APIs, which in turn target the Edge Chakra engine.</span></span> <span data-ttu-id="7c435-183">Weitere Informationen finden Sie unter [Targeting für Microsoft Edge vs. Legacy Engines](../chakra-hosting/targeting-edge-vs-legacy-engines-in-jsrt-apis.md).</span><span class="sxs-lookup"><span data-stu-id="7c435-183">For more information, see [Targeting Microsoft Edge vs. Legacy Engines](../chakra-hosting/targeting-edge-vs-legacy-engines-in-jsrt-apis.md).</span></span> <span data-ttu-id="7c435-184">Die vollständige JsRT-API ist für universelle Windows-apps verfügbar, mit Ausnahme der Unterstützung für Profilierungs-und Heap Enumeration (,, `JsStartProfiling` `JsStopProfiling` `JsEnumerateHeap` und `JsIsEnumeratingHeap` werden nicht unterstützt).</span><span class="sxs-lookup"><span data-stu-id="7c435-184">The complete JsRT API is available for Universal Windows apps, except for profiling and heap enumeration support (`JsStartProfiling`, `JsStopProfiling`, `JsEnumerateHeap`, and `JsIsEnumeratingHeap` are not supported).</span></span>  

<span data-ttu-id="7c435-185">JsRT ermöglicht es Skripts auch, nativ auf alle [APIs für die universelle Windows-Plattform (UWP)](https://msdn.microsoft.com/library/windows/apps/br211377.aspx) zuzugreifen, nachdem der API-Namespace über die Microsoft Edge JsRT-API verfügbar gemacht wurde `JsProjectWinRTNamespace` .</span><span class="sxs-lookup"><span data-stu-id="7c435-185">JsRT also allows scripts to natively access any [Universal Windows Platform (UWP) APIs](https://msdn.microsoft.com/library/windows/apps/br211377.aspx) after exposing the API namespace through Microsoft Edge JsRT API `JsProjectWinRTNamespace`.</span></span> <span data-ttu-id="7c435-186">Während für universelle Windows-Anwendungen zusätzlich zur Projektion notwendiger Namespaces kein Setup erforderlich ist, muss in einer klassischen (Win32-) Windows-Anwendung ein com-initialisierter Delegierter Pumpmechanismus aktiviert werden, um `JsSetProjectionEnqueueCallback` Ereignisse und asynchrone APIs zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="7c435-186">While Universal Windows Applications require no setup in addition to projecting necessary namespaces, in a Classic (Win32) Windows Application, a COM-initialized delegated pumping mechanism needs to be enabled through `JsSetProjectionEnqueueCallback` to enable events and asynchronous APIs.</span></span> <span data-ttu-id="7c435-187">Im folgenden Win32-Beispiel werden asynchrone UWP-APIs verwendet, um einen HTTP-Client zum Abrufen von Inhalten aus einem URI zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="7c435-187">The following Win32 sample utilizes asynchronous UWP APIs to create an http client to get content from a Uri:</span></span>  

```cpp
typedef struct _jsCall {
    JsProjectionCallback jsCallback;
    JsProjectionCallbackContext jsContext;
    HANDLE event;
} jsCall;

// Set up delegated pumping mechanism; not necessary in UWP applications.
jsCall outstandingCall = {};
CoInitializeEx(nullptr, COINIT_MULTITHREADED);
JsSetProjectionEnqueueCallback([](JsProjectionCallback jsCallback,
JsProjectionCallbackContext jsContext, void *callbackState) {
    jsCall* call = (jsCall*)callbackState;
    call->jsCallback = jsCallback;
    call->jsContext = jsContext;
    SetEvent(call->event);
    },
&outstandingCall);
HANDLE event = CreateEventEx(NULL, NULL, CREATE_EVENT_MANUAL_RESET, EVENT_ALL_ACCESS);
outstandingCall.event = event;

// Project necessary namespaces.
JsProjectWinRTNamespace(L"Windows.Foundation");
JsProjectWinRTNamespace(L"Windows.Web");

// Get content from an Uri.
JsRunScript(L"var uri = new Windows.Foundation.Uri(\"http://somedatasource.com\"); " \
    L"var httpClient = new Windows.Web.Http.HttpClient();" \
    L"httpClient.getStringAsync(uri).done(function (content) { " \
    L"    // do something with the string content " \
    L"}, onError); " \
    L"function onError(reason) { " \
    L"    // error handling " \
    L"}",
    currentSourceContext, L"", &result);

// Wait for async call to come in and then execute; not necessary in UWP applications.
WaitForSingleObjectEx(outstandingCall.event, 10000, FALSE) == WAIT_OBJECT_0;
outstandingCall.jsCallback(outstandingCall.jsContext);
```  

## <span data-ttu-id="7c435-188">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7c435-188">See also</span></span>  

*   [<span data-ttu-id="7c435-189">JavaScript-Runtime-Beispiel-App</span><span class="sxs-lookup"><span data-stu-id="7c435-189">JavaScript Runtime Sample App</span></span>](https://go.microsoft.com/fwlink/p/?LinkID=306674&clcid=0x409)   
*   [<span data-ttu-id="7c435-190">Referenz (JavaScript-Laufzeit)</span><span class="sxs-lookup"><span data-stu-id="7c435-190">Reference (JavaScript Runtime)</span></span>](../chakra-hosting/reference-javascript-runtime.md)   
*   [<span data-ttu-id="7c435-191">JavaScript-Laufzeit-Hosten</span><span class="sxs-lookup"><span data-stu-id="7c435-191">JavaScript Runtime Hosting</span></span>](../javascript-runtime-hosting.md)  
