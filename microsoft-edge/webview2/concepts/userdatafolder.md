---
description: Informationen zum Verwalten von benutzerdatenordnern in WebView2-Anwendungen
title: Verwalten von benutzerdatenordnern in WebView2-Anwendungen
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 10/14/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, Win32-apps, Win32, Edge, ICoreWebView2, ICoreWebView2Host, Browser-Steuerelement, Edge-HTML, benutzerdatenordner
ms.openlocfilehash: ff11c4e83fa931a97ed1b5c8afa4a30b5c0b5d25
ms.sourcegitcommit: 61cc15d2fc89aee3e09cec48ef1e0e5bbf8d289a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/15/2020
ms.locfileid: "11118989"
---
# <span data-ttu-id="68cc2-104">Verwalten des Benutzerdatenordners</span><span class="sxs-lookup"><span data-stu-id="68cc2-104">Managing the User Data Folder</span></span>  

<span data-ttu-id="68cc2-105">WebView2-Anwendungen interagieren mit benutzerdatenordnern, um Browserdaten wie Cookies, Berechtigungen und zwischengespeicherte Ressourcen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="68cc2-105">WebView2 applications interact with user data folders to store browser data, such as cookies, permissions, and cached resources.</span></span>  <span data-ttu-id="68cc2-106">Jede Instanz eines WebView2-Steuerelements ist mit einem benutzerdatenordner verknüpft.</span><span class="sxs-lookup"><span data-stu-id="68cc2-106">Each instance of a WebView2 control is associated with a user data folder.</span></span>  <span data-ttu-id="68cc2-107">Jeder benutzerdatenordner ist für einen Benutzer eindeutig.</span><span class="sxs-lookup"><span data-stu-id="68cc2-107">Each user data folder is unique to a user.</span></span>  

## <span data-ttu-id="68cc2-108">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="68cc2-108">Best Practices</span></span>  

<span data-ttu-id="68cc2-109">Benutzerdatenordner werden automatisch von WebView2 erstellt.</span><span class="sxs-lookup"><span data-stu-id="68cc2-109">User data folders are created automatically by WebView2.</span></span>  <span data-ttu-id="68cc2-110">WebView2-Entwickler steuern die Lebensdauer des Benutzerdatenordners.</span><span class="sxs-lookup"><span data-stu-id="68cc2-110">WebView2 developers control the lifetime of the user data folder.</span></span>  <span data-ttu-id="68cc2-111">Wenn Ihre Anwendung Benutzerdaten aus Anwendungssitzungen erneut verwendet, sollten Sie die benutzerdatenordner speichern, andernfalls können Sie Sie löschen.</span><span class="sxs-lookup"><span data-stu-id="68cc2-111">If your application re-uses user data from application sessions, consider saving the user data folders, otherwise you may delete them.</span></span>  <span data-ttu-id="68cc2-112">Berücksichtigen Sie bei der Entscheidung, wie Ihre benutzerdatenordner verwaltet werden sollen, die folgenden Szenarien:</span><span class="sxs-lookup"><span data-stu-id="68cc2-112">Consider the following scenarios when deciding how to manage your user data folders:</span></span>  

*   <span data-ttu-id="68cc2-113">Wenn derselbe Benutzer Ihre Anwendung wiederholt verwendet und der Webinhalt der Anwendung auf den Daten des Benutzers basiert, speichern Sie den Ordner Benutzerdaten.</span><span class="sxs-lookup"><span data-stu-id="68cc2-113">If the same user uses your application repeatedly, and the web content of the application relies on the user's data, save the user data folder.</span></span>  <span data-ttu-id="68cc2-114">Wenn mehrere Benutzer Ihre Anwendung wiederholt verwenden, erstellen Sie einen neuen benutzerdatenordner für jeden neuen Benutzer, und speichern Sie den benutzerdatenordner der einzelnen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="68cc2-114">If multiple users use your application repeatedly, create a new user data folder for each new user, and save the user data folder of each user.</span></span>
*   <span data-ttu-id="68cc2-115">Wenn Ihre Anwendung keine Wiederholungs Benutzer enthält, erstellen Sie einen neuen benutzerdatenordner für jeden Benutzer, und löschen Sie den vorherigen benutzerdatenordner.</span><span class="sxs-lookup"><span data-stu-id="68cc2-115">If your application does not have repeat users, create a new user data folder for each user, and delete the previous user data folder.</span></span>  

## <span data-ttu-id="68cc2-116">Erstellen von benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="68cc2-116">Create user data folders</span></span>  

<span data-ttu-id="68cc2-117">Wenn Sie den Speicherort des Benutzerdatenordners angeben möchten, schließen Sie den Parameter ein, `userDataFolder` Wenn Sie [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32 \) oder [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.net \) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="68cc2-117">To specify the location of the user data folder, include the `userDataFolder` parameter when calling [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="68cc2-118">Nach der Erstellung werden Browserdaten aus Ihrem WebView2-Steuerelement in einem Unterordner von gespeichert `userDataFolder` .</span><span class="sxs-lookup"><span data-stu-id="68cc2-118">After creation, browser data from your WebView2 control is stored in a subfolder of `userDataFolder`.</span></span>  <span data-ttu-id="68cc2-119">Wenn `userDataFolder` nicht angegeben, erstellt WebView2 benutzerdatenordner an Standardspeicherorten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="68cc2-119">When `userDataFolder` is not specified, WebView2 creates user data folders at default locations as follows:</span></span>  

*   <span data-ttu-id="68cc2-120">Für verpackte Windows Store-Apps ist der Standardbenutzerordner der Unterordner `ApplicationData\LocalFolder` im Paketordner.</span><span class="sxs-lookup"><span data-stu-id="68cc2-120">For packaged Windows Store apps, the default user folder is the `ApplicationData\LocalFolder` subfolder in the package's  folder.</span></span>  
*   <span data-ttu-id="68cc2-121">Bei vorhandenen Desktop-Apps ist der standardmäßige benutzerdatenordner der exe-Pfad Ihrer Anwendung + `.WebView2` .</span><span class="sxs-lookup"><span data-stu-id="68cc2-121">For existing desktop apps, the default user data folder is the exe path of your application + `.WebView2`.</span></span>  <span data-ttu-id="68cc2-122">Anstatt die Standardeinstellung zu verwenden, empfiehlt es sich, einen benutzerdatenordner anzugeben und ihn im gleichen Ordner zu erstellen, in dem alle anderen APP-Daten gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="68cc2-122">Instead of using the default, we recommend that you specify a user data folder, and that you create it in the same folder where all other app data is stored.</span></span>  

## <span data-ttu-id="68cc2-123">Löschen von benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="68cc2-123">Delete user data folders</span></span>  

<span data-ttu-id="68cc2-124">Ihre Anwendung muss möglicherweise benutzerdatenordner löschen:</span><span class="sxs-lookup"><span data-stu-id="68cc2-124">Your application may need to delete user data folders:</span></span>  

*   <span data-ttu-id="68cc2-125">Wenn Sie Ihre APP deinstallieren.</span><span class="sxs-lookup"><span data-stu-id="68cc2-125">When uninstalling your app.</span></span>  <span data-ttu-id="68cc2-126">Wenn Sie verpackte Windows Store-apps deinstallieren, löscht Windows benutzerdatenordner automatisch.</span><span class="sxs-lookup"><span data-stu-id="68cc2-126">If you are uninstalling packaged Windows Store apps, Windows deletes user data folders automatically.</span></span>  
*   <span data-ttu-id="68cc2-127">So bereinigen Sie den gesamten Browser-Datenverlauf</span><span class="sxs-lookup"><span data-stu-id="68cc2-127">To clean up all browsing data history.</span></span>  
*   <span data-ttu-id="68cc2-128">So stellen Sie die Datenbeschädigung wieder her</span><span class="sxs-lookup"><span data-stu-id="68cc2-128">To recover from data corruption.</span></span>  
*   <span data-ttu-id="68cc2-129">Zum Entfernen von vorherigen Sitzungsdaten.</span><span class="sxs-lookup"><span data-stu-id="68cc2-129">To remove previous session data.</span></span>  

> [!NOTE]
> <span data-ttu-id="68cc2-130">Dateien in benutzerdatenordnern können nach dem Schließen der WebView2-Anwendung weiterhin verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-130">Files in user data folders may still be in use after the WebView2 application is closed.</span></span>  <span data-ttu-id="68cc2-131">In diesem Fall warten Sie, bis der Browserprozess und alle untergeordneten Prozesse beendet sind, bevor Sie den Ordner löschen.</span><span class="sxs-lookup"><span data-stu-id="68cc2-131">In this situation, wait for the browser process and all child processes to exit before deleting the folder.</span></span>  <span data-ttu-id="68cc2-132">Sie können die Prozess-ID des Browser Prozesses mithilfe der `BrowserProcessId` Eigenschaft des WebView2 abrufen.</span><span class="sxs-lookup"><span data-stu-id="68cc2-132">You may retrieve the process id of the browser process using the `BrowserProcessId` property of the WebView2.</span></span>  

## <span data-ttu-id="68cc2-133">Freigeben von benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="68cc2-133">Share user data folders</span></span>  

<span data-ttu-id="68cc2-134">WebView2-Steuerelemente können dieselben benutzerdatenordner für folgende Personen freigeben:</span><span class="sxs-lookup"><span data-stu-id="68cc2-134">WebView2 controls may share the same user data folders to:</span></span>  

*   <span data-ttu-id="68cc2-135">[Optimieren Sie die Systemressourcen](../concepts/process-model.md) , indem Sie in einem Browserprozess ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-135">[Optimize system resources](../concepts/process-model.md) by running in one browser process.</span></span>  
*   <span data-ttu-id="68cc2-136">Freigeben des Browserverlaufs und der zwischengespeicherten Ressourcen</span><span class="sxs-lookup"><span data-stu-id="68cc2-136">Share browser history and cached resources.</span></span>  

<span data-ttu-id="68cc2-137">Beim Freigeben von benutzerdatenordnern sollten Sie Folgendes bedenken:</span><span class="sxs-lookup"><span data-stu-id="68cc2-137">Consider the following when sharing user data folders:</span></span>  

1.  <span data-ttu-id="68cc2-138">Stellen Sie beim erneuten Erstellen von WebView2-Steuerelementen zum Aktualisieren von Browserversionen mit [add_NewBrowserVersionAvailable](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable) \(Win32 \)-oder [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.net \)-Ereignissen sicher, dass Browserprozesse Exit und WebView2-Steuerelemente schließen, die denselben benutzerdatenordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-138">When re-creating WebView2 controls to update browser versions using [add_NewBrowserVersionAvailable](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable) \(Win32\) or [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.NET\) events, ensure browser processes exit and close WebView2 controls that share the same user data folder.</span></span>  <span data-ttu-id="68cc2-139">Um die Prozess-ID des Browser Prozesses abzurufen, verwenden Sie die `BrowserProcessId` -Eigenschaft des WebView2-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="68cc2-139">To retrieve the process id of the browser process, use the `BrowserProcessId` property of the WebView2 control.</span></span>  

2.  <span data-ttu-id="68cc2-140">WebView2-Steuerelemente, für die derselbe benutzerdatenordner freigegeben ist, müssen die gleichen Optionen für [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32 \) oder [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.net \) verwenden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-140">WebView2 controls that share the same user data folder must use the same options for [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="68cc2-141">Wenn dies nicht der Fall ist, schlägt die WebView2-Erstellung fehl `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)` .</span><span class="sxs-lookup"><span data-stu-id="68cc2-141">If not, the WebView2 creation will fail with `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)`.</span></span>  

<span data-ttu-id="68cc2-142">Wenn Sie verschiedene Teile der Anwendung isolieren oder Daten zwischen WebView2-Steuerelementen freigeben möchten, ist es möglich, dass Sie unterschiedliche benutzerdatenordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-142">To isolate different parts of your application or when sharing data between WebView2 controls is not needed, you may choose to use different user data folders.</span></span>  <span data-ttu-id="68cc2-143">Eine Anwendung kann beispielsweise aus zwei WebView2-Steuerelementen bestehen, einer für die Anzeige einer Werbung und der anderen zum Anzeigen von Anwendungsinhalten.</span><span class="sxs-lookup"><span data-stu-id="68cc2-143">For example, an application may consist of two WebView2 controls, one for displaying an advertisement and the other for displaying application content.</span></span>  <span data-ttu-id="68cc2-144">In diesem Szenario können Entwickler entscheiden, für jedes WebView2-Steuerelement unterschiedliche benutzerdatenordner zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-144">In this scenario, developers may opt to use different user data folders for each WebView2 control.</span></span>  

> [!NOTE]
> <span data-ttu-id="68cc2-145">Jeder WebView2-Browserprozess beansprucht zusätzlichen Arbeitsspeicher und Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="68cc2-145">Each WebView2 browser process consumes additional memory and disk space.</span></span>  <span data-ttu-id="68cc2-146">Daher empfiehlt es sich, WebView2s nicht mit zu vielen unterschiedlichen benutzerdatenordnern zur gleichen Zeit zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="68cc2-146">Therefore, we recommend not running WebView2s with too many different user data folders at the same time.</span></span>  
