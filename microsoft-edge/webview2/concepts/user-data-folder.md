---
description: Informationen zum Verwalten von Benutzerdatenordnern in WebView2-Anwendungen
title: Verwalten des Benutzerdatenordners in WebView2-Anwendungen.
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 05/06/2021
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, webview, win32 apps, win32, edge, ICoreWebView2, ICoreWebView2Host, browser control, edge html, user data folder
ms.openlocfilehash: d3b3e8d81ddffec043f0988385a433eb7c817de7
ms.sourcegitcommit: 5ae09b1ad6cd576c9fec12538b23cd849861f2b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/01/2021
ms.locfileid: "11627957"
---
# <a name="manage-the-user-data-folder"></a><span data-ttu-id="6e140-104">Verwalten Sie den Benutzerdatenordner</span><span class="sxs-lookup"><span data-stu-id="6e140-104">Manage the user data folder</span></span>  

<span data-ttu-id="6e140-105">WebView2-Anwendungen interagieren mit Benutzerdatenordnern, um Browserdaten wie Cookies, Berechtigungen und zwischengespeicherte Ressourcen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="6e140-105">WebView2 applications interact with user data folders to store browser data, such as cookies, permissions, and cached resources.</span></span>  <span data-ttu-id="6e140-106">Jede Instanz eines WebView2-Steuerelements ist einem Benutzerdatenordner zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="6e140-106">Each instance of a WebView2 control is associated with a user data folder.</span></span>  <span data-ttu-id="6e140-107">Jeder Benutzerdatenordner ist für einen Benutzer eindeutig.</span><span class="sxs-lookup"><span data-stu-id="6e140-107">Each user data folder is unique to a user.</span></span>  

## <a name="best-practices"></a><span data-ttu-id="6e140-108">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="6e140-108">Best practices</span></span>  

<span data-ttu-id="6e140-109">Benutzerdatenordner werden automatisch von WebView2 erstellt.</span><span class="sxs-lookup"><span data-stu-id="6e140-109">User data folders are created automatically by WebView2.</span></span>  <span data-ttu-id="6e140-110">WebView2-Entwickler steuern die Lebensdauer des Benutzerdatenordners.</span><span class="sxs-lookup"><span data-stu-id="6e140-110">WebView2 developers control the lifetime of the user data folder.</span></span>  <span data-ttu-id="6e140-111">Wenn Ihre Anwendung Benutzerdaten aus Anwendungssitzungen erneut verwendet, sollten Sie die Benutzerdatenordner speichern, andernfalls können Sie sie löschen.</span><span class="sxs-lookup"><span data-stu-id="6e140-111">If your application re-uses user data from application sessions, consider saving the user data folders, otherwise you may delete them.</span></span>  <span data-ttu-id="6e140-112">Berücksichtigen Sie die folgenden Szenarien bei der Entscheidung, wie Sie Ihre Benutzerdatenordner verwalten:</span><span class="sxs-lookup"><span data-stu-id="6e140-112">Consider the following scenarios when deciding how to manage your user data folders:</span></span>  

*   <span data-ttu-id="6e140-113">Wenn derselbe Benutzer Ihre Anwendung wiederholt verwendet und der Webinhalt der Anwendung von den Daten des Benutzers abhängt, speichern Sie den Benutzerdatenordner.</span><span class="sxs-lookup"><span data-stu-id="6e140-113">If the same user uses your application repeatedly, and the web content of the application relies on the user's data, save the user data folder.</span></span>  <span data-ttu-id="6e140-114">Wenn ihre Anwendung mehrmals von mehreren Benutzern verwendet wird, erstellen Sie einen neuen Benutzerdatenordner für jeden neuen Benutzer, und speichern Sie den Benutzerdatenordner jedes Benutzers.</span><span class="sxs-lookup"><span data-stu-id="6e140-114">If multiple users use your application repeatedly, create a new user data folder for each new user, and save the user data folder of each user.</span></span>
*   <span data-ttu-id="6e140-115">Wenn Ihre Anwendung keine wiederholten Benutzer hat, erstellen Sie einen neuen Benutzerdatenordner für jeden Benutzer, und löschen Sie den vorherigen Benutzerdatenordner.</span><span class="sxs-lookup"><span data-stu-id="6e140-115">If your application does not have repeat users, create a new user data folder for each user, and delete the previous user data folder.</span></span>  
    
## <a name="create-user-data-folders"></a><span data-ttu-id="6e140-116">Erstellen von Benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="6e140-116">Create user data folders</span></span>  

<span data-ttu-id="6e140-117">Um den Speicherort des Benutzerdatenordners anzugeben, schließen Sie den Parameter beim Aufrufen von `userDataFolder` [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) oder [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\) ein.</span><span class="sxs-lookup"><span data-stu-id="6e140-117">To specify the location of the user data folder, include the `userDataFolder` parameter when calling [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="6e140-118">Nach der Erstellung werden Browserdaten aus Ihrem WebView2-Steuerelement in einem Unterordner von `userDataFolder` gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6e140-118">After creation, browser data from your WebView2 control is stored in a subfolder of `userDataFolder`.</span></span>  <span data-ttu-id="6e140-119">Wenn `userDataFolder` nicht angegeben, erstellt WebView2 Wie folgt Benutzerdatenordner an Standardspeicherorten:</span><span class="sxs-lookup"><span data-stu-id="6e140-119">When `userDataFolder` is not specified, WebView2 creates user data folders at default locations as follows:</span></span>  

*   <span data-ttu-id="6e140-120">Bei verpackten Windows Store Apps ist der Standardbenutzerordner der `ApplicationData\LocalFolder` Unterordner im Ordner des Pakets.</span><span class="sxs-lookup"><span data-stu-id="6e140-120">For packaged Windows Store apps, the default user folder is the `ApplicationData\LocalFolder` subfolder in the package's  folder.</span></span>  
*   <span data-ttu-id="6e140-121">Bei vorhandenen Desktop-Apps ist der Standardbenutzerdatenordner der Exe-Pfad Ihrer Anwendung + `.WebView2` .</span><span class="sxs-lookup"><span data-stu-id="6e140-121">For existing desktop apps, the default user data folder is the exe path of your application + `.WebView2`.</span></span>  <span data-ttu-id="6e140-122">Anstatt den Standard zu verwenden, wird empfohlen, dass Sie einen Benutzerdatenordner angeben und ihn im selben Ordner erstellen, in dem alle anderen App-Daten gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="6e140-122">Instead of using the default, we recommend that you specify a user data folder, and that you create it in the same folder where all other app data is stored.</span></span>  
    
## <a name="delete-user-data-folders"></a><span data-ttu-id="6e140-123">Löschen von Benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="6e140-123">Delete user data folders</span></span>  

<span data-ttu-id="6e140-124">Ihre Anwendung muss möglicherweise Benutzerdatenordner löschen:</span><span class="sxs-lookup"><span data-stu-id="6e140-124">Your application may need to delete user data folders:</span></span>  

*   <span data-ttu-id="6e140-125">Beim Deinstallieren Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="6e140-125">When uninstalling your app.</span></span>  <span data-ttu-id="6e140-126">Wenn Sie Windows Store Apps gepackte Apps deinstallieren, löscht Windows Benutzerdatenordner automatisch.</span><span class="sxs-lookup"><span data-stu-id="6e140-126">If you are uninstalling packaged Windows Store apps, Windows deletes user data folders automatically.</span></span>  
*   <span data-ttu-id="6e140-127">So bereinigen Sie den gesamten Browserdatenverlauf.</span><span class="sxs-lookup"><span data-stu-id="6e140-127">To clean up all browsing data history.</span></span>  
*   <span data-ttu-id="6e140-128">So stellen Sie die Datenbeschädigung wieder her.</span><span class="sxs-lookup"><span data-stu-id="6e140-128">To recover from data corruption.</span></span>  
*   <span data-ttu-id="6e140-129">So entfernen Sie vorherige Sitzungsdaten.</span><span class="sxs-lookup"><span data-stu-id="6e140-129">To remove previous session data.</span></span>  
    
> [!NOTE]
> <span data-ttu-id="6e140-130">Dateien in Benutzerdatenordnern werden möglicherweise weiterhin verwendet, nachdem die WebView2-Anwendung geschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="6e140-130">Files in user data folders may still be in use after the WebView2 application is closed.</span></span>  <span data-ttu-id="6e140-131">Warten Sie in diesem Fall, bis der Browserprozess und alle untergeordneten Prozesse beendet werden, bevor Sie den Ordner löschen.</span><span class="sxs-lookup"><span data-stu-id="6e140-131">In this situation, wait for the browser process and all child processes to exit before deleting the folder.</span></span>  <span data-ttu-id="6e140-132">Sie können die Prozess-ID des Browserprozesses mithilfe der `BrowserProcessId` Eigenschaft von WebView2 abrufen.</span><span class="sxs-lookup"><span data-stu-id="6e140-132">You may retrieve the process id of the browser process using the `BrowserProcessId` property of the WebView2.</span></span>  

## <a name="share-user-data-folders"></a><span data-ttu-id="6e140-133">Freigeben von Benutzerdatenordnern</span><span class="sxs-lookup"><span data-stu-id="6e140-133">Share user data folders</span></span>  

<span data-ttu-id="6e140-134">WebView2-Steuerelemente können dieselben Benutzerdatenordner für Folgendes freigeben:</span><span class="sxs-lookup"><span data-stu-id="6e140-134">WebView2 controls may share the same user data folders to:</span></span>  

*   <span data-ttu-id="6e140-135">[Optimieren Sie Systemressourcen,](../concepts/process-model.md) indem Sie in einem Browserprozess ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6e140-135">[Optimize system resources](../concepts/process-model.md) by running in one browser process.</span></span>  
*   <span data-ttu-id="6e140-136">Freigeben des Browserverlaufs und zwischengespeicherter Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="6e140-136">Share browser history and cached resources.</span></span>  
    
<span data-ttu-id="6e140-137">Berücksichtigen Sie beim Freigeben von Benutzerdatenordnern Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6e140-137">Consider the following when sharing user data folders:</span></span>  

1.  <span data-ttu-id="6e140-138">Stellen Sie beim erneuten Erstellen von WebView2-Steuerelementen zum Aktualisieren von Browserversionen mit [add_NewBrowserVersionAvailable](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable) \(Win32\) oder [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.NET\)-Ereignissen sicher, dass Browserprozesse WebView2-Steuerelemente beenden und schließen, die denselben Benutzerdatenordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="6e140-138">When re-creating WebView2 controls to update browser versions using [add_NewBrowserVersionAvailable](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable) \(Win32\) or [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.NET\) events, ensure browser processes exit and close WebView2 controls that share the same user data folder.</span></span>  <span data-ttu-id="6e140-139">Verwenden Sie die Eigenschaft des WebView2-Steuerelements, um die Prozess-ID des Browserprozesses `BrowserProcessId` abzurufen.</span><span class="sxs-lookup"><span data-stu-id="6e140-139">To retrieve the process id of the browser process, use the `BrowserProcessId` property of the WebView2 control.</span></span>  
1.  <span data-ttu-id="6e140-140">WebView2-Steuerelemente, die denselben Benutzerdatenordner gemeinsam verwenden, müssen die gleichen Optionen für [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) oder [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\) verwenden.</span><span class="sxs-lookup"><span data-stu-id="6e140-140">WebView2 controls that share the same user data folder must use the same options for [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="6e140-141">Wenn nicht, schlägt die WebView2-Erstellung mit `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)` fehl.</span><span class="sxs-lookup"><span data-stu-id="6e140-141">If not, the WebView2 creation will fail with `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)`.</span></span>  
    
<span data-ttu-id="6e140-142">Um unterschiedliche Teile Ihrer Anwendung zu isolieren oder wenn die Freigabe von Daten zwischen WebView2-Steuerelementen nicht erforderlich ist, können Sie verschiedene Benutzerdatenordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="6e140-142">To isolate different parts of your application or when sharing data between WebView2 controls is not needed, you may choose to use different user data folders.</span></span>  <span data-ttu-id="6e140-143">Beispielsweise kann eine Anwendung aus zwei WebView2-Steuerelementen bestehen, eines zum Anzeigen einer Ankündigung und das andere zum Anzeigen von Anwendungsinhalten.</span><span class="sxs-lookup"><span data-stu-id="6e140-143">For example, an application may consist of two WebView2 controls, one for displaying an advertisement and the other for displaying application content.</span></span>  <span data-ttu-id="6e140-144">In diesem Szenario können Entwickler für jedes WebView2-Steuerelement unterschiedliche Benutzerdatenordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="6e140-144">In this scenario, developers may opt to use different user data folders for each WebView2 control.</span></span>  

> [!NOTE]
> <span data-ttu-id="6e140-145">Jeder WebView2-Browserprozess verbraucht zusätzlichen Arbeitsspeicher und Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="6e140-145">Each WebView2 browser process consumes additional memory and disk space.</span></span>  <span data-ttu-id="6e140-146">Daher wird empfohlen, WebView2s nicht gleichzeitig mit zu vielen unterschiedlichen Benutzerdatenordnern auszuführen.</span><span class="sxs-lookup"><span data-stu-id="6e140-146">Therefore, we recommend not running WebView2s with too many different user data folders at the same time.</span></span>  
